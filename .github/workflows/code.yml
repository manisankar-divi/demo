name: VPN Connection

on:
  push:
    branches:
      - main

jobs:
  connect-vpn:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
      - run: |
          sudo apt update
          sudo apt install -y network-manager-l2tp network-manager-l2tp-gnome

      - name: Establish VPN Connection
        uses: unknow-sk/github-action-vpn@v2
        with:
          VPN_SERVER: ${{ secrets.VPN_SERVER }}
          VPN_USER: ${{ secrets.VPN_USER }}
          VPN_PASSWORD: ${{ secrets.VPN_PASSWORD }}
          VPN_PSK: ${{ secrets.VPN_PSK }}
          # Add more input variables as needed

# jobs:
#   deploy:
#     runs-on: self-hosted  
#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v4
        
#       - uses: actions-hub/kubectl@master
#         env:
#           KUBE_CONFIG: ${{ secrets.KUBE_CONFIG }}
#         with:
#           args: get pods
#       - name: checking manifest files
#         run: pwd && ls -la
#       - name: k8s
#         run: |
#              kubectl apply -f namespace.yaml
#              kubectl apply -f configmap.yaml
#              kubectl apply -f deployment.yaml
#              kubectl apply -f service.yaml

